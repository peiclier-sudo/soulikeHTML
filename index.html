<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Dark Souls-inspired 3D web game built with Three.js">
    <meta name="theme-color" content="#1a1a2e">
    <title>Elden Flame - Dark Souls Web Experience</title>
    <link rel="stylesheet" href="/css/main.css?v=20260226-1">
    <link rel="stylesheet" href="/css/hud.css?v=20260226-1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <h1 class="game-title">ELDEN FLAME</h1>
            <div class="loading-bar-container">
                <div class="loading-bar" id="loading-bar"></div>
            </div>
            <p class="loading-text" id="loading-text">Preparing the Dark World...</p>
            <p class="loading-tip">Tip: Manage your stamina wisely in combat</p>
        </div>
    </div>

    <!-- Start Screen -->
    <div id="start-screen" style="display: none;">
        <div class="start-content">
            <h1 class="game-title">ELDEN FLAME</h1>
            <p class="subtitle">A Dark Souls Tribute</p>
            <button id="start-button" class="game-button">ENTER THE ABYSS</button>
            <div class="controls-hint">
                <p>AZERTY: Z - Avancer | Q - Gauche | D - Droite | Souris - Regarder</p>
                <p>Espace - Saut | R - Dash | Clic gauche - Attaque | Clic droit - Attaque chargée</p>
                <p>Q - Crimson Eruption | E - Bloodflail (finisher, 1–5 charges) | X - Blood Nova (root boss) | C - Bouclier sang | & - Potion de vie | F - Ultimate</p>
            </div>
        </div>
    </div>

    <!-- Game Canvas Container -->
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
    </div>

    <!-- HUD Overlay -->
    <div id="hud" style="display: none;">
        <!-- Reticule (crosshair) -->
        <div id="reticule" class="reticule" aria-hidden="true">
            <span class="reticule-dot"></span>
            <span class="reticule-line reticule-n"></span>
            <span class="reticule-line reticule-s"></span>
            <span class="reticule-line reticule-e"></span>
            <span class="reticule-line reticule-w"></span>
        </div>
        <!-- Health Bar -->
        <div class="stat-bar health-bar">
            <div class="bar-fill" id="health-fill"></div>
            <span class="bar-text" id="health-text">100/100</span>
        </div>
        <!-- Blood Essence orbs (0–5), E = Bloodflail finisher -->
        <div id="blood-essence" class="blood-essence" aria-label="Blood Essence charges">
            <span class="blood-essence-label">E</span>
            <div class="blood-essence-orbs">
                <span class="blood-orb" id="blood-orb-0"></span>
                <span class="blood-orb" id="blood-orb-1"></span>
                <span class="blood-orb" id="blood-orb-2"></span>
                <span class="blood-orb" id="blood-orb-3"></span>
                <span class="blood-orb" id="blood-orb-4"></span>
            </div>
        </div>
        <!-- No Blood Essence feedback (shown when E pressed with 0 charges) -->
        <div id="no-blood-essence" class="no-blood-essence" style="display: none;">No Blood Essence</div>
        
        <!-- Stamina Bar -->
        <div class="stat-bar stamina-bar">
            <div class="bar-fill" id="stamina-fill"></div>
            <span class="bar-text" id="stamina-text">100/100</span>
        </div>
        
        <!-- Ultimate Bar (F when full) -->
        <div id="ultimate-bar" class="ultimate-bar">
            <div class="ultimate-bar-bg">
                <div class="ultimate-bar-fill" id="ultimate-fill"></div>
            </div>
            <span class="ultimate-bar-label">ULTIMATE (F)</span>
        </div>
        
        <!-- Charge Bar (visible when charging) -->
        <div id="charge-bar" class="charge-bar" style="display: none;">
            <div class="charge-bar-bg">
                <div class="charge-bar-fill" id="charge-fill"></div>
                <div class="charge-bar-ready" id="charge-ready"></div>
            </div>
            <span class="charge-bar-label" id="charge-label">CHARGE</span>
        </div>
        
        <!-- Weapon Display -->
        <div id="weapon-display">
            <div class="weapon-icon" id="weapon-icon"></div>
            <span class="weapon-name" id="weapon-name">Claymore</span>
        </div>
        
        <!-- Damage Numbers Container -->
        <div id="damage-numbers"></div>
        
        <!-- FPS Counter -->
        <div id="fps-counter">FPS: 60</div>
        
        <!-- Boss Health Bar (hidden by default) -->
        <div id="boss-health" style="display: none;">
            <span class="boss-name" id="boss-name">DARK KNIGHT</span>
            <div class="boss-bar">
                <div class="bar-fill" id="boss-health-fill"></div>
            </div>
        </div>
    </div>

    <!-- Pause Menu -->
    <div id="pause-menu" style="display: none;">
        <div class="pause-content">
            <h2>PAUSED</h2>
            <button class="game-button" id="resume-button">Resume</button>
            <button class="game-button" id="settings-button">Settings</button>
            <button class="game-button" id="quit-button">Quit to Menu</button>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="settings-panel" style="display: none;">
        <div class="settings-content">
            <h2>SETTINGS</h2>
            <div class="setting-row">
                <label>Shadow Quality</label>
                <select id="shadow-quality">
                    <option value="low" selected>Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                </select>
            </div>
            <div class="setting-row">
                <label>Particle Count</label>
                <select id="particle-quality">
                    <option value="low" selected>Low</option>
                    <option value="medium">Medium</option>
                    <option value="high">High</option>
                </select>
            </div>
            <div class="setting-row">
                <label>Post Processing (Bloom)</label>
                <input type="checkbox" id="post-processing">
            </div>
            <div class="setting-row">
                <label>Mouse Sensitivity</label>
                <input type="range" id="mouse-sensitivity" min="1" max="10" value="5">
            </div>
            <button class="game-button" id="settings-back">Back</button>
        </div>
    </div>

    <!-- Death Screen -->
    <div id="death-screen" style="display: none;">
        <h1 class="death-text">YOU DIED</h1>
    </div>

    <!-- Import Map for ES Modules -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    
    <script type="module" src="/js/main.js?v=20260226-2"></script>
</body>
</html>

